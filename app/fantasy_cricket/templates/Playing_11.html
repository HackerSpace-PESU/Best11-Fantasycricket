<!DOCTYPE html>
<html>
<head>
	<title>Choose your playing 11</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
	</script>
	<link
	rel="stylesheet"
	type="text/css"
	href="{{ url_for('static',path='styles/style2.css') }}"
  />	
</head>
<body>
	<center>

		<p class="mainHeader">Select 11 Players From Each Team</p>
		
		<form id= "select_players" action="/playing11?team1={{teams[0]}}&team2={{teams[1]}}&file={{file}}&type={{match_type}}" method="POST">
				
			<div class="container">

			<div class="content">
				<table name="team1" style="display: inline-block;">
					<h4 class="heading"> 
						{{teams[0]}}
					</h4>
					{% for player in squads[0] %}
						<tr>
							<td>
								{{player}}
							</td>
							<td>
								<input class="team1" type="checkbox" name="{{player}}"></input>
							</td>
						</tr>
					{% endfor %}
				</table>
			</div>

			<div class="space"></div>

			<div class="content">
		
				<table>
					<h4 class="heading">
						{{teams[1]}}
					</h4>
					{% for player in squads[1] %}
						<tr>
							<td>
								<td>{{player}}</td>
							</td>
							<td>
								<input class="team2" type="checkbox" name="{{player}}"></input>
							</td>
						</tr>
					{% endfor %}
				</table>
			</div>
			

		</div>
		
		<input type="submit" class="button" id="submitButton" name="Confirm"></input>
		</form>
		
		<div id="grey" style="
		width: 100%; 
		position: fixed;
		height:100%;
		background-color: rgb(0, 0, 0,0.9);
		top:0%;
		left:0%;
		display: none;
		">
			<img src="../static/loading.gif" alt="Loading" 
			id="loading"
			style="width: 300px; position: fixed;
			height:auto;
			top:30%;
			left:40%;
			display: none;
			">
			<br><br>
			<center>
				<h2 style="color:white; font-size:40px">Loading....</h2>
			</center>
		</div>
		

	</center>
	<script type="text/javascript">

		var groupA = $("input.team1[type='checkbox']");
		var groupB = $("input.team2[type='checkbox']");
		
		groupA.click(function(e) {
  			if (groupA.filter(":checked").length > 11) {
    			e.preventDefault();
  			}
		});
		groupB.click(function(e) {
  			if (groupB.filter(":checked").length > 11) {
    			e.preventDefault();
  			}
		});

		$("#select_players").submit(function(event){			
			if(groupA.filter(":checked").length<11 || groupB.filter(":checked").length<11){
				alert("Pls select 11 players per team");
				event.preventDefault();
			}
			else{
				
				document.getElementById("submitButton").style.display="none";
				document.getElementById("grey").style.display="inline-block";
				document.getElementById('loading').style.display="inline-block";
			}
			
		})

	</script>
	
</body>
</html>